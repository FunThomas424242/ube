<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="ube-task" basedir="../.." default="processBuild">

	<property name="eclipse.home" value="C:\Program Files\eclipse\eclipse-SDK-3.7.1-win32-test" />
	<property name="ube.core.dir" value="${basedir}/Deploying/ube.site/plugins/" />
	<property name="ube.felix.dir" value="${basedir}/Plugins/ube.felix/bin/" />


	<target name="init" description="Stopp the UBE Framework">

		<path id="plugin.jars">
			<fileset dir="${ube.core.dir}">
				<include name="**/*.jar" />
			</fileset>
			<fileset dir="${ube.felix.dir}">
				<include name="**/*.jar" />
			</fileset>
		</path>

		<taskdef name="ube" classname="ube.core.task.UBELauncher" classpathref="plugin.jars" />
		<typedef name="condition.equals" classname="org.apache.tools.ant.taskdefs.condition.Equals" />

	</target>


	<target name="stopp" description="Stopp the UBE Framework" depends="init">

		<ube Shutdown="true" />

	</target>


	<target name="processBuild" description="Start the UBE Framework" depends="init">




		<ube Shutdown="false">
			<condition.equals arg1="true" arg2="true" />
			<condition.equals arg1="blah" arg2="blah" />
		</ube>

		<ube Shutdown="true" />

	</target>

	<target name="build.site" description="Build the update site">

		<path id="eclipse.launcher">
			<fileset dir="${eclipse.home}/plugins">
				<include name="**/org.eclipse.equinox.launcher_*.jar" />
			</fileset>
		</path>


		<java jar="C:\Program Files\eclipse\eclipse-SDK-3.7.1-win32-test\plugins\org.eclipse.equinox.launcher_1.2.0.v20110502.jar" fork="true" failonerror="true">
			<arg value="-application" />
			<arg value="org.eclipse.ant.core.antRunner" />
			<arg value="-buildfile" />
			<arg file="${basedir}/process_artifacts.xml" />
			<jvmarg value="-Dp2.repo=${repository}" />
		</java>

	</target>

</project>